<!doctype html>
<html lang="en">
<head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400&display=swap" rel="stylesheet">

<link rel="stylesheet" href="stylesheets/fonts/icomoon/style.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<link rel="stylesheet" href="stylesheets/css/owl.carousel.min.css">

<!-- Bootastrap CSS -->
<link rel="stylesheet" href="stylesheets/css/bootstrap.min.css">

<!-- Style -->
<link rel="stylesheet" href="stylesheets/css/style.css">
<link rel="icon" href="https://64.media.tumblr.com/bafc236f8913370429d52ee13d363ff9/tumblr_nkm7541saS1r6wywso1_500.gifv">
<title>Edit an existing room</title>
</head>
<nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top justify-content-between">
  <div class="navbar-nav">

    <a href="/staffDash" class="nav-link nav-item navbar-brand" id="home"><i class="fa fa-fw fa-home"></i> Home</a>

  </div>

<div class="btn-group open">
  <a class="btn btn-primary" href="#"><i class="fa fa-user fa-fw"></i> <%= name%></a>
  <a class="btn btn-primary dropdown-toggle" data-toggle="dropdown" href="#">
  </a>
  <ul class="dropdown-menu"> 
    <li><a href="/logout"><i class="fa fa-sign-out "></i> Logout</a></li>
  </ul>
</div>

</nav>
<body onload="img(0)">
  <div class='container-fluid'>
  <div class='row vh-100'>
    <div class='col-sm-2 h-100 bg-light'>
      <div style="margin-top:25%;">
        <nav class="nav nav-pills nav-fill flex-column">
        <a class="nav-link" href="/staffDash">Dashboard</a>
        <a class="nav-link active" href="/staff">Room Booking</a>
        <a class="nav-link disabled" href="#">Student Consultation</a>
        <a class="nav-link disabled" href="#">Timetable</a>
      </nav>
      </div>
    </div>
      <div class='col-sm-8 content border'>
        <div class="row justify-content-center">
          <div class="col-md-4 mb-4 contents">
          <h3>Edit an existing room</h3>
          <%- include('../../../views/partials/messages.ejs') %>
            <form action="/editroom" method="post">
              <div class="form-group field--not-empty">
                <label for="roomID">Room ID</label>
                <input
                type="text"
                class="form-control"
                name="roomID"
                id="roomID"
                required
                readonly
                />
              </div>

              <div class="form-group field--not-empty">
                  <label for="roomCapacity">Capacity</label>
                  <input
                  type="number"
                  class="form-control"
                  name="roomCapacity"
                  id="roomCapacity"
                  required
                  />
              </div>

              <div class="form-group field--not-empty">
                <label for="price">Price</label>
                <input
                type="text"
                class="form-control"
                name="price"
                id="price"
                required
                />
              </div>

              <div class="form-group field--not-empty">
                <label for="promotionalCode">Promotional Code</label>
                <input
                type="text"
                class="form-control"
                name="promotionalCode"
                id="promotionalCode"
                />
              </div>
              <div>
              <br>
              Launch room on Creation?
              <br>
              <label>
                <input id="launchTrue"onclick="img(0)" class="form-switch" type="radio" name="launchStatus" checked value="true" >
                  Yes
              </label>
              <label>
                <input id="launchFalse" onclick="img(1)"class="form-switch" type="radio"name="launchStatus" value="false" >
                  No
              </label>
              </div>

                <div class="launch row" id="launchgroup">
                  <div class="col-12">
                    <h5>Date</h5>
                  </div>

                    <div class="col">
                      From
                      <div class="form-group">
                        <label for="launchstartdate"></label>
                        <input
                        type="date"
                        class="form-control"
                        name="launchstartdate"
                        id="launchstartdate"
                        min="2022-01-01"
                        max="2099-12-31"
                        />
                      </div>
                    </div>
                  <input type="hidden" id="deleteroom" name="deleteroom" value="false">
                    <div class="col">
                      To
                      <div class="form-group">
                        <label for="launchenddate"></label>
                        <input
                        type="date"
                        class="form-control"
                        name="launchenddate"
                      id="launchenddate"
                      min="2022-01-01"
                      max="2099-12-31"
                      />
                    </div>
                  </div>

                  <div class="col-12">
                    <h5>Duration</h5>
                  </div>

                  <div class="col">
                    <label for="timeslot">Timeslot from</label>
                    <input type="time" min="08:00:00" max="18:00:00" id="openinghour" name= "openinghour"value="openinghour">
                    to
                    <input type="time" min="08:00:00" max="18:00:00" id="closinghour" name="closinghour" value="closinghour">
                  </div>
                </div>

                <br>
                 <input type="submit" value="Edit Room" class="btn btn-block btn-primary">
                 <input type="button" value="Delete Room"  data-toggle="modal" data-target="#exampleModalCenter" class="bg-danger btn btn-block btn-primary">
               </div>
 <!-- Modal -->
 <div>
               <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                 <div class="modal-dialog modal-dialog-centered" role="document">
                   <div class="modal-content">
                     <div class="modal-header">
                       <h6 class="modal-title" id="exampleModalLongTitle">Delete Room</h6>
                       <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                         <span aria-hidden="true">&times;</span>
                       </button>
                     </div>
                     <div class="modal-body text-center">
                       Are you sure you want to delete this room?
                     </div>
                     <div class="modal-footer justify-content-center">
                       <button type="button" id=deleteroom class="btn btn-secondary" data-dismiss="modal">Close</button>
                       <input type="submit" value="Delete" onclick="myFunction()" class="btn btn-danger">
                     </div>
                   </div>
                 </div>
               </div>
 </div>
            </form>
          </div>
          </div>
        </div>
        <div class='col-2 h-100 bg-light'>
        </div>
      </div>

    <script>
  const roomID =  (localStorage.getItem('room-ID'))
  const price =  (localStorage.getItem('price-ID'))
  const promotionalCode =  (localStorage.getItem('promotionalCode-ID'))
  const roomCapacity =  (localStorage.getItem('roomCapacity-ID'))

  const launchstartdate = localStorage.getItem('launchstartdate-ID')
  const launchenddate = localStorage.getItem('launchenddate-ID')
  const timerange = localStorage.getItem('timerange-ID')

  var openinghour = timerange.slice(0,5)
  var closinghour = timerange.slice(-5)
    document.getElementById('roomID').value = roomID
    document.getElementById('roomCapacity').value = roomCapacity

    document.getElementById('promotionalCode').value = promotionalCode
    document.getElementById('price').value = price
    document.getElementById('roomID').value = roomID
    document.getElementById('launchstartdate').value = launchstartdate
    document.getElementById('launchenddate').value = launchenddate
    document.getElementById('openinghour').value = openinghour
    document.getElementById('closinghour').value = closinghour
    function img(x)
      {if(x==0)
        document.getElementById('launchgroup').style.display='block'
        else
        document.getElementById('launchgroup').style.display='none'
       return

      }
      function myFunction() {
        document.getElementById('deleteroom').value='true'
}
    </script>

      <script src="stylesheets/js/jquery-3.3.1.min.js"></script>
      <script src="stylesheets/js/popper.min.js"></script>
      <script src="stylesheets/js/bootstrap.min.js"></script>
      <script src="stylesheets/js/main.js"></script>
      </body>
